<!DOCYTPE hmtl>
<html>
<head>
  <title>konami</title>
</head>
<style>
</style>
<link rel="stylesheet" type="text/css" href="./css/main.css">
<body>
  <div id="background">
    <div id="display1">
      <div class="cli">></div><h4 id="display" style="color: white"></h4>
    </div>
  </div>
</body>
<script>


var keytotal = 0
var myfontsize = 100
var x = 1
// variables for storing text
const secretCode ="ArrowUpArrowUpArrowDownArrowDownArrowLeftArrowRightArrowLeftArrowRightba"
var codeChain = [];

document.addEventListener('keypress', (e) => {

function addOrDelete (keypressed, codeChain) {

}
  if (myfontsize > 120) {
      keytotal += 1
      x += 1
      myfontsize -= (x ** 2)
      console.log (keytotal)
      console.log (myfontsize)
      const keypressed = event.key

      document.getElementById('background').innerHTML += keypressed
      // document.getElementById('background').style.fontSize = myfontsize
      document.getElementById('display').innerHTML += keypressed

  }

  else if (myfontsize < 120 && myfontsize > 50) {
      keytotal += 1
      x += 1
      myfontsize -= x
      console.log (keytotal)
      console.log (myfontsize)
      const keypressed = event.key
      // document.getElementById('display').innerHTML += keypressed

      document.getElementById('background').innerHTML += keypressed
      // document.getElementById('background').style.fontSize = myfontsize
      document.getElementById('background').style.textShadow = "0px 0px 5px rgba(0,225,0,0.9)"
      document.getElementById('display').innerHTML += keypressed
  }

  else {
      keytotal += 1
      x = 0
      myfontsize -= x
      console.log (keytotal)
      console.log (myfontsize)
      const keypressed = event.key
      // document.getElementById('display').innerHTML += keypressed

      document.getElementById('background').innerHTML += keypressed
      // document.getElementById('background').style.fontSize = myfontsize
      document.getElementById('background').style.textShadow = "0px 0px 3px rgba(0,225,0,0.9)"
      document.getElementById('display').innerHTML += keypressed

  }

  console.log(myfontsize)

});

document.addEventListener('keyup', (e) => {

  if (keytotal < 20) {
    document.getElementById('display').style.fontSize = 50  }
  else {
    document.getElementById('display').style.fontSize = 40
    document.getElementById('display').style.height = "auto";
    document.getElementById('display').style.marginTop = 3
  };
});


window.addEventListener('keyup', (e) => {
  // const secretCode ="ArrowUpArrowUpArrowDownArrowDownArrowLeftArrowRightArrowLeftArrowRightba"
  // const codeChain = [];
  codeChain.push(e.key);
  codeChain.splice(-secretCode.length -1, codeChain.length - secretCode.length);

  if (codeChain.join('').includes(secretCode)) {
    window.open("https://www.youtube.com/watch?v=YBMQhKK3Ctk","Contra","resizable,status");
    codeChain = []
    console.log("you won" + codeChain)
  }

});

function boxShadowPulse () {
  console.log("entering boxShadowPulse function");
  var boxShadowElement = document.getElementById('display1');

  var styleState = function () {
    console.log("entering styleState")
    var testCurrentStyle = getComputedStyle(document.getElementById('display1')).boxShadow;
    console.log("testCurrentStyle is: " + testCurrentStyle);
    // var currentStyle = testCurrentStyle.includes('\"boxShadow\":\"rgb(191, 189, 189) 0px 1px 26px 1px inset, rgb(99, 97, 97) 1px 9px 77px -4px\"');
    var currentStyle = JSON.stringify(testCurrentStyle).includes("rgb(191, 189, 189) 0px 1px 26px 1px inset, rgb(99, 97, 97) 1px 9px 77px -4px");
    console.log("currentStyle is: " + currentStyle)
    return currentStyle;
  };

  function styleOn () {
    console.log("entering styleOn()")
    document.getElementById('display1').style.boxShadow = "rgb(191, 189, 189) 0px 1px 26px 1px inset, rgb(99, 97, 97) 1px 9px 77px -4px";
    document.getElementById('display1').style.webkitBoxShadow = "rgb(191, 189, 189) 0px 1px 26px 1px inset, rgb(99, 97, 97) 1px 9px 77px -4px";
    console.log(boxShadowElement)

  }

  function styleOff() {
    console.log("entering styleOff()")
    document.getElementById('display1').style.boxShadow = "";
    document.getElementById('display1').style.webkitBoxShadow = "";
    console.log(boxShadowElement)

  }

  function delay(ms) {
    console.log("entering delay()")
    return new Promise(resolve => setTimeout(resolve, ms))
  }

  function switchStyleState () {
    console.log("entering switchStyleState().")
    if (styleState() === true) {
      // wait 2 seconds and turn style off and keep transition
      delay(1000).then(styleOff);
    } else {
       //wait 2 seconds and turn style on
      delay(1000).then(styleOn);
    }
  }

  setInterval(switchStyleState, 500)

}

function stopPulse () {
  document.getElementById('display1').style.webkitBoxShadow = "rgb(191, 189, 189) 0px 1px 26px 1px inset, rgb(99, 97, 97) 1px 9px 77px -4px";
  clearInterval()
}

window.addEventListener('keydown', function () {
  stopPulse();
})
window.addEventListener('mousemove', function () {
  console.log("mouseenter fired: " + boxShadowPulse())
  boxShadowPulse();
});


function addMovie () {
  var iframe = "<iframe width='560' height='315' src='https://www.youtube.com/embed/YBMQhKK3Ctk' title='YouTube video player' frameborder='0' allow='accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture' allowfullscreen></iframe>";

}

</script>
</html>
